
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Why not try F#? - dave^2 = -1</title>
  <meta name="author" content="David Tchepak">

  
  <meta name="description" content="I have avoided seriously trying F# for years now, mainly because: F# was described as a “functional programming language”, and I didn’t know FP. I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://davesquared.net/2013/05/why-not-try-fsharp.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!-- MathJax config based on http://docs.mathjax.org/en/latest/config-files.html#the-mml-htmlormml-configuration-file
       (local mathjax derived from https://ro-che.info/articles/2017-04-02-deploying-mathjax) -->
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    config: ["MMLorHTML.js"],
    jax: ["input/MathML","output/HTML-CSS","output/NativeMML"],
    extensions: ["mml2jax.js"],
    "HTML-CSS": {
      availableFonts: ["TeX"],
      imageFont: null
    },
    MathMenu: {
       showRenderer: false,
       showFontMenu: false,
       showLocale: false
    }
  });
  </script>
  <script type="text/javascript" src="/javascripts/mathjax-2.7.0/MathJax.js"></script>
  <link href="http://feeds2.feedburner.com/davesquared" rel="alternate" title="dave^2 = -1" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2217573-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body  class="no-sidebar">
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds2.feedburner.com/davesquared" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<!-- Google CSE Search Box Begins  -->
<form id="searchbox_005697633880271604295:snlx0l0dwf0" action="http://www.google.com/cse" onsubmit="davesquared_submitSearchBoxWidget()">
  <fieldset role="search">
  <input value="005697633880271604295:snlx0l0dwf0" name="cx" type="hidden"/>
  <input value="" name="cof" type="hidden"/>
  <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<!-- Google CSE Search Box Ends -->
<script type="text/javascript">
function davesquared_submitSearchBoxWidget() {
  var searchBox = document.getElementById("searchbox_005697633880271604295:snlx0l0dwf0");
  searchBox.action = "/search";
  searchBox.cof.value="FORID:11";
}
</script>
  
<ul class="main-navigation">
  <li><a href="/" class="siteHome">dave^2 = -1</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/categories">Categories</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Why not try F#?</h1>
    
    
      <p class="meta">
        








  



  

<time datetime="2013-05-26T21:30:00+10:00" pubdate data-updated="true">26 May 2013</time> 
      </p>
    
  </header>


<div class="entry-content"><p>I have avoided seriously trying F# for years now, mainly because:</p>
<ul>
<li>F# was described as a “functional programming language”, and I didn’t know FP. I was keen to learn FP, but prioritised learning more about OO design and patterns that seemed more immediately applicable to my everyday work.</li>
<li>The syntax looked really confusing.</li>
<li>Whenever I heard F# mentioned it was in the same breath as “financial data processing” or some other niche area that seemed to have little to do with the types of applications I wrote.</li>
</ul>
<p>I carried these hastily-acquired preconceptions around for years, until this year I needed to do a small application for work, and decided to try it in F#. To my surprise I found that <em>none of these preconceptions were valid</em>! What’s more, I actually quite enjoyed it. F# seemed to let me do everything I would normally do in C#, only with less code, and with more powerful features waiting in the wings should I want to dabble with them.</p>
<p>So in this post I wanted to go through why these assumptions were false, just in case they are holding you back too. I think F# is well worth trying out for every developer that does anything with .NET, but rather than trying to sell you on why you should try F#, I’m going to focus on the reasons you may think that you shouldn’t, and trust your natural developer curiosity to do the rest. ;)</p>
<!-- more -->
<h2 id="misconception-1-we-have-to-know-fp-to-use-f">Misconception 1: We have to know FP to use F#</h2>
<p>Functional programming is programming with pure functions. Functions return the same output whenever applied to a specific input, and they have no side-effects. With this in mind, here is a snippet of F#:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<pre><code class='fsharp'><span></span><span class="k">let</span> <span class="nv">mutable</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">let</span> <span class="nv">NotAFunction</span><span class="bp">()</span> <span class="o">=</span>
    <span class="n">counter</span> <span class="o">&lt;-</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">printfn</span> <span class="s">&quot;%d&quot;</span> <span class="n">counter</span>
</code></pre>
</div>
</figure>
</notextile>
</div>
<p><code>NotAFunction</code> takes no input and produces no output, so it doesn’t meet the first criterion for a function. It also has side-effects – it mutates the <code>counter</code> variable (the <code>&lt;-</code> operator is for destructive assignment) and prints to the console. The first time we call <code>NotAFunction()</code> it prints <code>1</code>, then next call prints <code>2</code>.</p>
<p>F# is more than capable of expressing mutable, imperative procedures. It has some features that can help if we want to do FP, just like C# does. We don’t have to use them, nor do we have to be an applicative functor-toting, monad-wielding FP boffin in order to use either language.</p>
<h2 id="misconception-2-f-syntax-is-confusing">Misconception 2: F# syntax is confusing</h2>
<p>When I thought “confusing”, what I really meant was “different”. And what I should have meant was “a little different”. F# is often terser than C# which threw off my brain’s pattern matching a bit, but this disorientation didn’t last much longer than my first hour of writing F#.</p>
<p>F# has most of the C# constructs you’ve come to know and love, and in very similar forms. We still have equivalents to <code>for</code>, <code>while</code> and <code>foreach</code> loops (F# uses <code>for .. in</code> instead of <code>foreach</code>), <code>if .. else if .. else</code> conditionals, <code>try .. catch</code> (<code>with</code> instead of <code>catch</code>), <code>using</code> (<code>open</code>) etc. Nothing a quick trip to the <a href="http://msdn.microsoft.com/en-us/library/dd233181.aspx">F# language reference on MSDN</a> won’t fix.</p>
<p>Granted, we can (and should) write F# in a quite non-C#ish style which can result in more of a culture-shock<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, but we don’t have to start out like that. We can happily write C#ish F# code and get immediate benefits from the relative terseness of the language, with the added benefit of gaining access to more powerful features to explore later on if we choose to.</p>
<h2 id="misconception-3-f-is-not-for-normal-applications">Misconception 3: F# is not for “normal” applications</h2>
<p>F# seems more than capable of expressing the standard OO designs we tend to see in general C# applications, including <a href="http://www.growing-object-oriented-software.com/">GOOS-style</a>, class-with-injected-dependencies-style OO.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<pre><code class='csharp'><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">MonadPolice</span> <span class="p">{</span>
  <span class="k">private</span> <span class="k">readonly</span> <span class="n">ImDave</span> <span class="n">_dave</span><span class="p">;</span>
  <span class="k">private</span> <span class="k">readonly</span> <span class="n">IEmailGateway</span> <span class="n">_email</span><span class="p">;</span>

  <span class="k">public</span> <span class="nf">MonadPolice</span><span class="p">(</span><span class="n">ImDave</span> <span class="n">dave</span><span class="p">,</span> <span class="n">IEmailGateway</span> <span class="n">email</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_dave</span> <span class="p">=</span> <span class="n">dave</span><span class="p">;</span>
    <span class="n">_email</span> <span class="p">=</span> <span class="n">email</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="k">void</span> <span class="nf">Surveil</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">var</span> <span class="n">overheard</span> <span class="p">=</span> <span class="n">_dave</span><span class="p">.</span><span class="n">RecentRamblings</span><span class="p">();</span>
    <span class="kt">var</span> <span class="n">zealotTalk</span> <span class="p">=</span> <span class="n">overheard</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="s">&quot;monad&quot;</span><span class="p">));</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">outburstOfZealotry</span> <span class="k">in</span> <span class="n">zealotTalk</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">_email</span><span class="p">.</span><span class="n">Send</span><span class="p">(</span><span class="s">&quot;xerx&quot;</span><span class="p">,</span> <span class="s">&quot;the monad police&quot;</span><span class="p">,</span>
                  <span class="s">&quot;Lack of pragmatism detected&quot;</span><span class="p">,</span> <span class="n">outburstOfZealotry</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
</figure>
</notextile>
</div>
<p>Here’s one way to express this in F#:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<pre><code class='fsharp'><span></span><span class="k">type</span> <span class="nc">MonadPolice</span><span class="o">(</span><span class="n">dave</span> <span class="o">:</span> <span class="n">ImDave</span><span class="o">,</span> <span class="n">email</span> <span class="o">:</span> <span class="n">IEmailGateway</span><span class="o">)</span> <span class="o">=</span>
  <span class="k">member</span> <span class="n">this</span><span class="p">.</span><span class="nf">Surveil</span><span class="bp">()</span> <span class="o">=</span>
    <span class="k">let</span> <span class="nv">overheard</span> <span class="o">=</span> <span class="n">dave</span><span class="o">.</span><span class="n">RecentRamblings</span><span class="bp">()</span>
    <span class="k">let</span> <span class="nv">zealotTalk</span> <span class="o">=</span> <span class="n">overheard</span><span class="o">.</span><span class="n">Where</span><span class="o">(</span><span class="n">contains</span> <span class="s">&quot;monad&quot;</span><span class="o">)</span>
    <span class="k">for</span> <span class="n">outburstOfZealotry</span> <span class="k">in</span> <span class="n">zealotTalk</span> <span class="k">do</span>
        <span class="n">email</span><span class="o">.</span><span class="n">Send</span> <span class="s">&quot;xerx&quot;</span> <span class="s">&quot;the monad police&quot;</span>
                   <span class="s">&quot;Lack of pragmatism detected&quot;</span> <span class="n">outburstOfZealotry</span>
</code></pre>
</div>
</figure>
</notextile>
</div>
<p>We get the same capabilities and style, in a similar albeit terser syntax. We provide the default constructor arguments in the type declaration, which gives us a constructor and what are effectively private, readonly fields for free. F# also has sensible defaults for member visibility, so much of the time we won’t need to explicitly mark something as <code>public</code> or <code>private</code>. And we can test it in the same way as usual too.</p>
<p>So F# is not just for modelling financial or scientific calculations. It’s fine for querying repositories, sending emails, and doing whatever useful stuff our apps normally need to do.</p>
<h2 id="the-fine-print">The fine print</h2>
<p>Not everything about my first F# project was positive. The main problems I had with F# were around tooling.</p>
<ul>
<li><del>No templates (as far as I could tell) for F#-backed WPF views (same for MVC?), so it may be easiest to stick a C# shell around a core F# project.</del> <em>Update July 2014:</em> This is no longer strictly true. There are quite a few <a href="http://blogs.msdn.com/b/fsharpteam/archive/2013/12/12/new-visual-f-templates-for-asp-net-web-api-mstest-and-nancy-now-available.aspx">templates in the VS gallery</a> and in the <a href="https://github.com/fsharp/FSharpCommunityTemplates">F# Community Templates site</a>.</li>
<li><del>Many ReSharper and VS shortcuts and refactorings I reach for by reflex just weren’t there.</del> <em>Update July 2014:</em> Still true of ReSharper and VS, but much less of an issue now that <a href="http://fsprojects.github.io/VisualFSharpPowerTools/">VS F# Power Tools</a> covers the main stuff I need.</li>
<li><del>For some reason VS doesn’t provide a way to add folders to an <code>fsproj</code>.</del> <em>Update July 2014:</em> This is also covered by <a href="http://fsprojects.github.io/VisualFSharpPowerTools/folderorganization.html">VS F# Power Tools</a>. Thanks to <a href="https://twitter.com/isaac_abraham/status/491575780015878144">Isaac</a> for pointing this out.</li>
<li><del>And perhaps most disturbingly, I have to define members before they are referenced elsewhere, which means I actually have to explicitly order the files in my project (ugh!).</del> <em>Update July 2014:</em> Still true, but after using F# for a while now I’m surprised by just how little this bothers me. It actually has <a href="http://fsharpforfunandprofit.com/posts/cyclic-dependencies/">some advantages</a>.</li>
</ul>
<p>There are also a couple of things we lose that C# has, like combined <code>try .. catch .. finally</code> (we have to use nested <code>try/with</code> and <code>try/finally</code> for F#), and the <code>protected</code> modifier (it works for interop, but we can’t declare a member <code>protected</code> as of F# 3). But F# offers a lot of features C# lacks to compensate.</p>
<h2 id="why-bother">Why bother?</h2>
<p>I’ve attempted to argue we shouldn’t ignore F# on the grounds that it can work similarly to C#. Why not just stick to C# then?</p>
<p>For me, F# offers new opportunities to improve the way I develop software. We gain access to other sorts of types, like discriminated unions and records. We get usable tuples. We gain the ability to compose methods from existing methods, rather than requiring us to create new classes and plumb objects together. We get terser syntax and some interesting ways to create embedded DSLs. We get immutability by default, as well as non-nullable references.</p>
<p>And perhaps best of all, we can choose when we start experimenting with this stuff. To me it seems we can start off using F# as a terser C# with some neat defaults, and slowly start exploring some of these other ideas that have been largely inaccessible to us C# devs, without the risk of having to learn a whole lot of new stuff before we can be productive.</p>
<h2 id="conclusion">Conclusion</h2>
<p>My F# experience has admittedly been very limited so far, so I’m not sure what problems await for larger projects, but it has been more than enough to encourage me to spend more time with F#.</p>
<p>I’ve learned we don’t need to know FP to use F#, the syntax isn’t really a problem and can actually be used as a terser form of what we already know, and that we can apply F# to the same problems and even using the same patterns as we normally do in .NET. In exchange, we gain the ability to try out new techniques and improve the way we develop software.</p>
<p>I’m tempted to stick an F# project into every VS solution I work with, and see if it ends up accumulating loads of useful functionality, or whether it will need a more concerted effort at adoption.</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>I’ve also seen some C# written in a style that has taken me quite a while to parse, despite me knowing the language reasonably well.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</section>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">David Tchepak</span></span>

      








  



  

<time datetime="2014-07-22T23:30:00+10:00" class="updated">Updated 22 Jul 2014</time>
      

<span class="categories">
  
    <a class='category' href='/categories/-net/'>.net</a>, <a class='category' href='/categories/f-/'>f#</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://davesquared.net/2013/05/why-not-try-fsharp.html" data-via="" data-counturl="http://davesquared.net/2013/05/why-not-try-fsharp.html" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2013/04/same-input-through-function-list.html" title="Previous Post: A mad Haskeller runs the same input through a list of functions">&laquo; A mad Haskeller runs the same input through a list of functions</a>
      
      
        <a class="basic-alignment right" href="/2013/06/filterm.html" title="next Post: filterM">filterM &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

    </div>
  </div>
  <footer role="contentinfo"><p class="disclaimer">All code and advice is provided without warranty -- use at your own risk! This is just a blog! Don't take it too seriously!<br/>
Despite not being too serious, this blog has a <a href="http://davesquared.net/2007/07/privacy-policy.html">Privacy Policy</a>, because it uses Google Analytics to see if anyone drops by.</p>
<p>
  Copyright &copy; 2022 - David Tchepak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

  
<script type="text/javascript">
      var disqus_shortname = 'davesquared';
        // var disqus_developer = 1;
        var disqus_identifier = 'http://davesquared.net/2013/05/why-not-try-fsharp.html';
        var disqus_url = 'http://davesquared.net/2013/05/why-not-try-fsharp.html';
        var disqus_script = 'embed.js';
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'https://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
